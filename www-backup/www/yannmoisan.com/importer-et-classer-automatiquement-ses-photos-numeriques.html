<!DOCTYPE html>
<html lang="fr"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="6C_Yu8j-I-U3pjFBjHojSiqvDPxhKJuYqap_tSXV8M4" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Importer et classer automatiquement ses photos numériques | Yann Moisan</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Importer et classer automatiquement ses photos numériques" />
<meta property="og:locale" content="fr" />
<meta name="description" content="Script shell pour importer et classer automatiquement les photos de son appareil numérique sous Linux" />
<meta property="og:description" content="Script shell pour importer et classer automatiquement les photos de son appareil numérique sous Linux" />
<link rel="canonical" href="https://www.yannmoisan.com/importer-et-classer-automatiquement-ses-photos-numeriques.html" />
<meta property="og:url" content="https://www.yannmoisan.com/importer-et-classer-automatiquement-ses-photos-numeriques.html" />
<meta property="og:site_name" content="Yann Moisan" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-03-21T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Importer et classer automatiquement ses photos numériques" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2011-03-21T00:00:00+01:00","datePublished":"2011-03-21T00:00:00+01:00","description":"Script shell pour importer et classer automatiquement les photos de son appareil numérique sous Linux","headline":"Importer et classer automatiquement ses photos numériques","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.yannmoisan.com/importer-et-classer-automatiquement-ses-photos-numeriques.html"},"url":"https://www.yannmoisan.com/importer-et-classer-automatiquement-ses-photos-numeriques.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" /><link type="application/atom+xml" rel="alternate" href="https://www.yannmoisan.com/feed.xml" title="Yann Moisan" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Yann Moisan</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Posts</a><a class="page-link" href="/news-from-last-month.html">News from last month</a><a class="page-link" href="/a-propos.html">About me</a><a class="page-link" href="/bookmarks.html">Bookmarks</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Importer et classer automatiquement ses photos numériques</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2011-03-21T00:00:00+01:00" itemprop="datePublished">Mar 21, 2011
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Update 17/02/2013 : script sur GitHub, script amélioré</p>

<h2 id="pourquoi-automatiser-">Pourquoi automatiser ?</h2>

<p>Le transfert des photos entre un appareil numérique et un ordinateur et le classement induit sont
des tâches répétitives. Et les données Exif présentes dans les images permettent de réaliser le
classement automatiquement. Utilisant Ubuntu, un système d’exploitation convivial, il est tout
naturel d’automatiser ce processus grâce à un script shell.</p>

<p>Je classe mes photos ainsi : un premier niveau de répertoire par an, et un second niveau par
jour. Je ne change pas le nom du fichier créé par l’appareil : <code class="language-plaintext highlighter-rouge">IMGxxxx.jpg</code>. Ce classement respecte
l’ordre chronologique et il serait fastidieux de nommer chaque photo en fonction de son contenu.</p>

<ul>
  <li>2001
    <ul>
      <li>2001-01-01 Description 1</li>
      <li>2001-02-01 Description 2</li>
    </ul>
  </li>
  <li>2002
    <ul>
      <li>2002-01-01 Description 3</li>
    </ul>
  </li>
</ul>

<h2 id="comment-automatiser-">Comment automatiser ?</h2>

<p>Je suis sous Ubuntu 10.10, mon appareil photo est un Canon IXUS xxx. Il est donc détecté
automatiquement lors que je le connecte à l’ordinateur par USB. Précision importante : à l’ouverture
de la pop-up, cliquer sur Démonter.</p>

<p>Le script utilise les deux programmes suivants : <code class="language-plaintext highlighter-rouge">gphoto</code> et <code class="language-plaintext highlighter-rouge">exiftool</code>. Voici le code source du
script :</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#! /bin/sh</span>
<span class="c"># Importe et classe les fichiers (images et videos) de l'appareil photo.</span>
<span class="c"># Ne supprime pas les photos originales de l'appareil.</span>

<span class="nv">mydate</span><span class="o">=</span><span class="sb">`</span><span class="nb">date</span> +%Y%m%d<span class="sb">`</span>
<span class="nv">DEST_DIR</span><span class="o">=</span>~/import<span class="nv">$mydate</span>

<span class="nb">command</span> <span class="nt">-v</span> gphoto2 <span class="o">&gt;</span>/dev/null 2&gt;&amp;1 <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="o">&gt;</span>&amp;2 <span class="s2">"I require gphoto2 but it's not installed.  Aborting."</span><span class="p">;</span> <span class="nb">exit </span>1<span class="p">;</span> <span class="o">}</span>
<span class="nb">command</span> <span class="nt">-v</span> exiftool <span class="o">&gt;</span>/dev/null 2&gt;&amp;1 <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="o">&gt;</span>&amp;2 <span class="s2">"I require exiftool but it's not installed.  Aborting."</span><span class="p">;</span> <span class="nb">exit </span>1<span class="p">;</span> <span class="o">}</span>

<span class="nb">mkdir</span> <span class="nv">$DEST_DIR</span>
<span class="nb">cd</span> <span class="nv">$DEST_DIR</span>

gphoto2 <span class="nt">--auto-detect</span>|grep Canon
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-ne</span> 0 <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Erreur: vérifier que l'appareil est allumé et connecté."</span>
    <span class="nb">exit </span>1
<span class="k">fi

</span>gphoto2 <span class="nt">--get-all-files</span> <span class="o">&gt;</span>/dev/null 2&gt;&amp;1
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-ne</span> 0 <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Erreur: vérifier que l'appareil n'est pas monté."</span>
    <span class="nb">exit </span>1
<span class="k">fi
</span>exiftool <span class="nt">-ext</span> JPG <span class="nt">-ext</span> AVI <span class="s2">"-Directory&lt;DateTimeOriginal"</span> <span class="nt">-d</span> <span class="s2">"%Y-%m-%d"</span> <span class="nb">.</span>
</code></pre></div></div>

<p>Le script est disponible sur mon
<a href="https://github.com/YannMoisan/dotfiles/blob/master/bin/photo-import">GitHub</a>.</p>

  </div><a class="u-url" href="/importer-et-classer-automatiquement-ses-photos-numeriques.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Yann Moisan</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Yann Moisan</li><li><a class="u-email" href="mailto:yamo93+blog@gmail.com">yamo93+blog@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/YannMoisan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">YannMoisan</span></a></li><li><a href="https://www.linkedin.com/in/yann-moisan-01771746"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">yann-moisan-01771746</span></a></li><li><a href="https://www.twitter.com/yannmoisan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">yannmoisan</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Blog de Yann Moisan Scala, Java, Linux</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
