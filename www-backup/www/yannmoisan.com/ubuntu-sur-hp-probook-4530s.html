<!DOCTYPE html>
<html lang="fr"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="6C_Yu8j-I-U3pjFBjHojSiqvDPxhKJuYqap_tSXV8M4" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Ubuntu sur HP ProBook 4530s | Yann Moisan</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Ubuntu sur HP ProBook 4530s" />
<meta property="og:locale" content="fr" />
<meta name="description" content="Notes d’installation d’Ubuntu sur un ordinateur portable HP ProBook 4530s" />
<meta property="og:description" content="Notes d’installation d’Ubuntu sur un ordinateur portable HP ProBook 4530s" />
<link rel="canonical" href="https://www.yannmoisan.com/ubuntu-sur-hp-probook-4530s.html" />
<meta property="og:url" content="https://www.yannmoisan.com/ubuntu-sur-hp-probook-4530s.html" />
<meta property="og:site_name" content="Yann Moisan" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-11-02T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Ubuntu sur HP ProBook 4530s" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2011-11-02T00:00:00+01:00","datePublished":"2011-11-02T00:00:00+01:00","description":"Notes d’installation d’Ubuntu sur un ordinateur portable HP ProBook 4530s","headline":"Ubuntu sur HP ProBook 4530s","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.yannmoisan.com/ubuntu-sur-hp-probook-4530s.html"},"url":"https://www.yannmoisan.com/ubuntu-sur-hp-probook-4530s.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" /><link type="application/atom+xml" rel="alternate" href="https://www.yannmoisan.com/feed.xml" title="Yann Moisan" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Yann Moisan</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Posts</a><a class="page-link" href="/news-from-last-month.html">News from last month</a><a class="page-link" href="/a-propos.html">About me</a><a class="page-link" href="/bookmarks.html">Bookmarks</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Ubuntu sur HP ProBook 4530s</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2011-11-02T00:00:00+01:00" itemprop="datePublished">Nov 2, 2011
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="un-nouveau-portable">Un nouveau portable</h2>

<p>J’ai acheté un PC portable HP ProBook 4530s, notamment pour un usage professionnel. Les atouts sont
une dalle mate, un disque dur à 7200t et un processeur Intel Core i5 2410M dernière génération.
L’ordinateur est pré installé avec Windows 7 Pro. Après le premier boot, le système consomme 1,8 Go
de RAM. 4 partitions sont utilisées :</p>

<ul>
  <li>ntfs SYSTEM 300M boot</li>
  <li>ntfs (C:) 442G</li>
  <li>ntfs HP_RECOVERY 17,9G</li>
  <li>fat32 HP_TOOLS 2,87G</li>
</ul>

<h2 id="ubuntu">Ubuntu</h2>

<p>Je suis un fidèle utilisateur d’Ubuntu, une distribution Linux facile d’accès. J’ai installé la
version 11.04 Desktop AMD64 en dual boot avec Windows. Je partage cette expérience à travers ce
billet car j’ai rencontré différents problèmes.</p>

<h2 id="1er-problème-le-partitionnement">1er problème: le partitionnement</h2>

<p>Un disque dur ne peut pas contenir plus de 4 partitions primaires. La solution consiste à supprimer
une partition pour pouvoir créer une partition étendue. Je sauvegarde donc HP_TOOLS sur une clé
USB, supprime la partition et redimensionne la partition C: Je redémarre alors Windows pour mettre à
jour la table de partition. Je boote alors sur le CD d’installation et sur l’écran ‘Preparing to
install Ubuntu’, je coche les cases Download updates while installing Install this third-party
software Sur l’écran ‘Allocate Drive Space’, je choisis Install ubuntu alongside pour le dual-boot
avec Windows. L’installation a créé 3 partitions :</p>

<ul>
  <li>une partition étendue</li>
  <li>une partition pour la racine (/) en ext4</li>
  <li>une partition de swap</li>
</ul>

<p>Tous les périphériques fonctionnent correctement : le wifi, la webcam, le microphone, les touches de
fonction, le touchpad. Le seul problème rencontré est que le double tap LED pour désactiver le
touchpad ne fonctionne pas. Les logiciels non libres (flash et MP3) fonctionne aussi après
l’installation.</p>

<h2 id="2ème-problème--lamorçage">2ème problème : l’amorçage</h2>

<p>Pour vérifier le bon fonctionnement du dual boot, je démarre Windows. Pas de problème. Puis je
démarre à nouveau Ubuntu. Le menu de Grub s’affiche bien mais le système reste bloqué pendant le
démarrage… Après recherche, il s’agit d’un problème spécifique à Windows/HP qui écrit dans le MBR au
détriment de Grub 2. Il suffit de désactiver le service HP Software Framework Service (hpqwmiex.exe)
et de restaurer Grub 2. Au menu de grub, sélectionner recovery mode et, au recovery menu,
sélectionner Update grub bootloader.</p>

<h2 id="3ème-problème--la-carte-graphique">3ème problème : la carte graphique</h2>

<p>L’ordinateur possède deux cartes graphiques : une carte intégrée au processeur et une carte AMD
Radeon HD 6470M dédiée. Le but est d’optimiser la consommation d’énergie en basculant sur la carte
dédiée uniquement en cas de besoin. Malheureusement, cette technique fonctionne encore mal sous
Linux car le serveur X a besoin d’un redémarrage pour le switch.</p>

<p>Après une mise à jour du système, le système reste bloqué pendant le démarrage. Après recherche,
c’est lié à la carte graphique. Une solution, assez bourrine, consiste à désactiver Switchable
Graphics dans le BIOS. Ainsi, le système n’utilise que la carte embarquée avec le processeur, comme
l’indique la commande <code class="language-plaintext highlighter-rouge">lspci|grep VGA</code>.</p>

<h2 id="4ème-problème-la-carte-wifi">4ème problème: la carte Wifi</h2>

<p>La connexion Wifi souffre de lenteurs. C’est dû à l’utilisation du driver ath9k de la carte Atheros
avec un noyau 2.6.38. La solution consiste simplement à exécuter cette commande :</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-s</span>
<span class="nb">echo</span> <span class="s2">"options ath9k nohwcrypt=1"</span> <span class="o">&gt;</span> /etc/modprobe.d/ath9k.conf
</code></pre></div></div>

<p>Tous les problèmes étant maintenant résolus, on va faire quelques réglages :</p>

<h2 id="paramétrage-du-bios">Paramétrage du BIOS</h2>

<p>Par rapport à mon précédent portable, le BIOS offre beaucoup plus de paramètres. C’est en partie lié
au passage à UEFI et HP qui permet la configuration de ses programmes dans le BIOS. Ces programmes
ne sont pas compatibles avec Linux. J’aime désactiver les choses que je n’utilise pas. J’ai donc
décoché les options suivantes :</p>

<ul>
  <li>Device Configurations:
    <ul>
      <li>USB Legacy Support</li>
      <li>HP Day Starter</li>
      <li>HP Quick Web</li>
      <li>Numlock On (coché), mais malheureusement ça ne fonctionne pas !</li>
    </ul>
  </li>
  <li>Built-in Device Options:
    <ul>
      <li>Embedded Bluetooth Device</li>
      <li>Wake on LAN (disable)</li>
    </ul>
  </li>
  <li>Port Options:
    <ul>
      <li>Express Card</li>
    </ul>
  </li>
</ul>

<h2 id="optimisation-du-démarrage">Optimisation du démarrage</h2>

<p>Comme indiqué précédemment, Ubuntu est une distribution simple. Le revers de la médaille est le
démarrage par défaut de programmes que je n’utilise pas. J’ai donc décoché dans Startup Application
:</p>

<ul>
  <li>Bluetooth Manager</li>
  <li>Check for new hardware drivers</li>
  <li>GNOME Login Sound</li>
  <li>Personal File Sharing</li>
  <li>Remote Desktop</li>
  <li>Update Notifier</li>
  <li>Ubuntu One</li>
  <li>User folders update</li>
  <li>Visual Assistance</li>
  <li>Zeitgeist Datahub (mais malheureusement le service démarre quand même)</li>
</ul>

<p>Après le démarrage, le système consomme 400 Mo de RAM (4 fois moins que Win 7 !!!)</p>

<h2 id="quelques-pistes-à-faire-après-linstallation">Quelques pistes à faire après l’installation</h2>

<p>La configuration du touchpad : je désactive le clic avec le touchpad (pour éviter l’insupportable
déplacement du curseur pendant la frappe) et j’utilise le scroll à deux doigts.</p>

<p>Installation de <code class="language-plaintext highlighter-rouge">numlockx</code> afin de verrouiller automatiquement le pavé numérique avant la connection.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Malheureusement, l’installation fut plus laborieuse que ce que j’imaginais. Mais une fois cette
étape passée, le système fonctionne impeccablement (pas comme Windows…). J’essayerai l’installation
de la version 11.10 prochainement pour voir si la situation s’est améliorée.</p>

  </div><a class="u-url" href="/ubuntu-sur-hp-probook-4530s.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Yann Moisan</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Yann Moisan</li><li><a class="u-email" href="mailto:yamo93+blog@gmail.com">yamo93+blog@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/YannMoisan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">YannMoisan</span></a></li><li><a href="https://www.linkedin.com/in/yann-moisan-01771746"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">yann-moisan-01771746</span></a></li><li><a href="https://www.twitter.com/yannmoisan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">yannmoisan</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Blog de Yann Moisan Scala, Java, Linux</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
