<!DOCTYPE html>
<html lang="fr">
<head>
      <meta charset="utf-8">
        <title>Carnet d'adresses et ligne de commande|Yann Moisan</title>
        <link href="prettify.css" type="text/css" rel="stylesheet" />
        <script type="text/javascript" src="prettify.js"></script>  
        <link media="all" href="bootstrap.css" type="text/css" rel="stylesheet" />
        <link media="all" href="yamo.css" type="text/css" rel="stylesheet" />

        <link rel="shortcut icon" href="http://www.yannmoisan.com/favicon.ico" />
        <link rel="icon" type="image/x-icon" href="http://www.yannmoisan.com/favicon.ico" />

        <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Billets" />

        <script type="text/javascript">

            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-21571082-1']);
            _gaq.push(['_trackPageview']);

            (function() {
             var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
             ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
             var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
             })();

        </script>
     </head>
     <body onLoad="prettyPrint()">
         <div class="container">
             <!-- <header class="jumbotron subhead" id="overview">-->
  <header>
  <h1>Yxx Mxxxxx</h1>
  <p>Sur Java, les technos Web et autres...</p>
  </header>
  <nav>
    <ul>
                     <li><a href="index.html">Accueil</a></li>
                     <li><a href="a-propos.html">A propos</a></li>
                     <li><a href="cv.html">CV</a></li>
    </ul>

  </nav>

  <!--             <div id="sep"></div> -->
             <div class="row">
                 <div class="span8">
                     <!-- nav -->
<ul class="pager">
<li class="previous"><a href="ubuntu-sur-hp-probook-4530s.html">Billet précédent</a></li>
</ul>
<article>
    <header>
        <div class="entry-date">
            <span class="day">19</span>
            <span class="month">01</span>
            <span class="year">2012</span>
        </div>
        <h2 class="entry-title">Carnet d'adresses et ligne de commande</h2>
    </header>
    <div class="entry-content">
        <!-- content -->
<p>Un bon développeur, comme tout bon artisan, doit utiliser les bons outils et les maitriser. L'outil incontournable, en raison notamment de sa puissance, est la ligne de commande. Afin de m'exercer, j'ai écrit une commande d'une ligne pour trier mes contacts par jour et mois de naissance. Avant toute chose, j'exporte le carnet d'adresses de Thunderbird au format CSV : Tools &gt; Adress Book puis Tools &gt; Export</p>
<p>Voici le code :</p>
<pre class="prettyprint linenums lang-bsh">
cat ~/export.csv | 
  sed '1d' | 
  sed -e 's/"[^"]*"//g' | 
  awk -F, '$31 !~"^$" {print $0}' | 
  cut -d, -f1,2,30-32 | 
  sort -g -t, -k4 -k5 | 
  awk -F, 'BEGIN {OFS=""} {printf "%0.2d/%0.2d/%4d %s %s\n", $5, $4, $3, $1, $2}'
</pre>
<ul>
    <li>1: supprime la ligne d'entête</li>
    <li>2: supprime le texte entre double quotes, car il peut contenir des virgules. Exemple : "25, rue de la Pie qui Chante"</li>
    <li>3: filtre les contacts dont la date de naissance n'est pas renseignée</li>
    <li>4: supprime les champs inutiles</li>
    <li>5: trie sur le jour et le mois, en gérant le padding optionnel</li>
    <li>6: formate joliment la sortie</li>
</ul>
Ce script fonctionne mais est perfectible. N'hésitez pas à m'envoyer vos idées d'amélioration, je mettrai à jour le billet.
    </div>
    </article>
    <!-- entry -->


</div>
    <aside>    
    <h2>Contact</h2>
    <p>yamo93[AT]gmail[DOT]com</p>
    <ul class="nav nav-list">
        <li class="nav-header">Mes activités</li>
        <li><a href="http://www.linkedin.com/pub/yann-moisan/46/717/17">LinkedIn</a></li>
        <li><a href="https://github.com/YannMoisan">GitHub</a></li>
        <li><a href="http://knowledgeblackbelt.com/UserView.wwa?userId=13810326#!User/yamo93/forcePublicView=true">Blackbelt</a></li>
        <li class="nav-header">Liens externes - Blog perso</li>
        <li><a href="http://www.standblog.org">Standblog</a></li>  
        <li><a href="http://www.touilleur-express.fr/">Le touilleur express</a></li>
        <li><a href="http://thecodersbreakfast.net/">The Coder's Breakfast</a></li>
        <li><a href="http://blog.javabien.net/">Java Bien!</a></li>
        <li class="nav-header">Liens externes - Blog entreprise</li> 
        <li><a href="http://blog.xebia.fr/">Xebia</a></li>
        <li><a href="http://blog.octo.com/">Octo</a></li>
        <li><a href="http://blog.zenika.com/">Zenika</a></li>
        <li><a href="http://blog.ippon.fr/">Ippon</a></li>
        <li class="nav-header">Liens externes - Design Web</li> 
        <li><a href="http://openweb.eu.org/">Openweb</a></li>
        <li><a href="http://www.pompage.net/">Pompage</a></li>
        <li><a href="http://www.alsacreations.com/">Alsa creations</a></li>
    </ul>
    </aside>    
                 </div>
                 <hr>
                 <footer>
                 <span id="copyright">&copy; 2012 Yann Moisan</span>
                 <span id="web-standards">It's nice <a href="http://validator.w3.org/check/referer" title="Valid XHTML">XHTML</a></span>
                 </footer>
             </div>
         </body>
     </html>

